<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crypto Bot Dashboard</title>
    <link rel="stylesheet" href="/static/dashboard.css" />
    <link rel="stylesheet" href="/static/style.css" />
    <script defer src="/static/app.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; font-src https://fonts.gstatic.com; script-src 'self'; img-src 'self' data:; connect-src 'self'"
    />
  </head>
  <body>
    <div class="page-shell">
      <header class="page-header card">
        <div class="page-heading">
          <h1 class="page-title">Crypto Bot Dashboard</h1>
          <p class="page-subtitle">
            상태와 통계를 한눈에 확인하고 최근 저널을 빠르게 탐색하세요.
          </p>
        </div>
        <div class="page-meta">
          <span class="chip chip--accent">조회 전용</span>
        </div>
      </header>

      <main class="page-main">
        <section class="panel-grid">
          <article class="card panel panel--stack" id="card-balance">
            <header class="panel-header">
              <div>
                <h2 class="panel-title">잔고 / 포지션</h2>
                <p class="panel-subtitle">실시간 자산 현황</p>
              </div>
            </header>
            <div class="panel-body">
              <div class="balance-summary" id="balance"></div>
              <div class="table-wrapper" id="positions"></div>
            </div>
          </article>

          <article class="card panel" id="card-stats">
            <header class="panel-header">
              <div>
                <h2 class="panel-title">통계</h2>
                <p class="panel-subtitle">기간별 성과를 비교해 보세요.</p>
              </div>
            </header>
            <div class="panel-body">
              <div class="stats-grid">
                <div class="input-field">
                  <label for="st-since">시작 (UTC YYYY-MM-DD)</label>
                  <input id="st-since" placeholder="2025-01-01" />
                </div>
                <div class="input-field">
                  <label for="st-until">종료 (UTC YYYY-MM-DD)</label>
                  <input id="st-until" placeholder="2025-12-31" />
                </div>
                <div class="input-field">
                  <label for="st-symbol">심볼 (선택)</label>
                  <input id="st-symbol" placeholder="BTC/USDT:USDT" />
                </div>
                <div class="input-field">
                  <label for="st-group">그룹</label>
                  <select id="st-group">
                    <option value="">없음</option>
                    <option value="day">일별</option>
                    <option value="week">주별</option>
                    <option value="month">월별</option>
                  </select>
                </div>
              </div>
              <div class="stats-actions">
                <button class="btn btn--ghost" id="st-refresh">조회</button>
                <button class="btn" id="st-today">오늘</button>
                <button class="btn" id="st-this-month">이번 달</button>
                <button class="btn" id="st-last-7d">최근 7일</button>
              </div>
              <div class="stats-output" id="stats"></div>
            </div>
          </article>
        </section>

        <section class="card panel">
          <header class="panel-header">
            <div>
              <h2 class="panel-title">저널 조회</h2>
              <p class="panel-subtitle">
                오늘 생성된 최신 기록을 시간순으로 확인하세요.
              </p>
            </div>
          </header>
          <div class="panel-body">
            <div class="journal-controls">
              <label class="journal-limit">
                최근 개수
                <input
                  id="jr-limit"
                  type="number"
                  min="1"
                  max="200"
                  value="20"
                />
              </label>
              <label class="journal-limit">
                타임존
                <select id="tz-select">
                  <option value="UTC" selected>UTC</option>
                  <option value="UTC+9">UTC+9</option>
                  <option value="UTC+1">UTC+1</option>
                  <option value="UTC-5">UTC-5</option>
                </select>
              </label>
              <label class="journal-limit">
                코인
                <select id="jr-symbol">
                  <option value="">전체</option>
                </select>
              </label>
              <label class="journal-sort">
                정렬
                <select id="jr-sort">
                  <option value="desc" selected>최신순</option>
                  <option value="asc">오래된순</option>
                </select>
              </label>
              <label class="journal-sort">
                기간
                <select id="jr-range">
                  <option value="today" selected>오늘</option>
                  <option value="recent15">최근 15분</option>
                </select>
              </label>
              <div id="jr-type-filters" class="journal-type-filters">
                <span class="journal-type-label">유형</span>
                <label
                  ><input type="checkbox" value="thought" checked />사고</label
                >
                <label
                  ><input type="checkbox" value="decision" checked />판단</label
                >
                <label
                  ><input type="checkbox" value="action" checked />액션</label
                >
                <label
                  ><input type="checkbox" value="review" checked />리뷰</label
                >
              </div>
              <div id="jr-status-filters" class="journal-type-filters">
                <span class="journal-type-label">포지션</span>
                <label><input type="checkbox" value="long" checked />롱</label>
                <label
                  ><input type="checkbox" value="hold" checked />홀딩</label
                >
                <label><input type="checkbox" value="short" checked />숏</label>
              </div>
              <button class="btn btn--ghost" id="jr-refresh">조회</button>
              <a
                class="btn"
                href="/overlay?limit=12&today_only=1&ascending=0&types=decision,action,review"
                target="_blank"
                >판단 오버레이</a
              >
              <a
                class="btn"
                href="/overlay_positions?refresh=5&fs=18"
                target="_blank"
                >포지션 오버레이</a
              >
            </div>
            <div class="table-wrapper" id="journals"></div>
          </div>
        </section>
      </main>
    </div>
  </body>
</html>
